<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Artikel</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="style.css">
</head>
<body class="bg-light text-dark transition-colors duration-300">

<header class="sticky top-0 z-30 bg-white dark:bg-gray-900 border-b border-light dark:border-dark shadow-md">
  <div class="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="index.html" class="font-semibold text-lg">&larr; Kembali</a>
  </div>
</header>

<main class="max-w-5xl mx-auto px-4 py-8">
  <div id="article-container" class="space-y-6">

    <h1 id="title" class="text-3xl font-extrabold"></h1>
    <div id="tags" class="flex flex-wrap gap-2"></div>
    <img id="thumb" class="w-full h-64 object-cover rounded-lg shadow-md" loading="lazy">
    <div id="content" class="prose dark:prose-invert max-w-full"></div>

    <h2 class="text-2xl font-bold mt-6">Sub Bab</h2>
    <div id="sub" class="space-y-6"></div>

    <h2 class="text-2xl font-bold mt-6">File Download</h2>
    <div id="files" class="flex flex-wrap gap-3 mt-2"></div>

  </div>
</main>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const id = new URLSearchParams(window.location.search).get("id");
    if(!id){
        document.getElementById("article-container").innerHTML =
            "<h2 class='text-center mt-20 text-xl'>Artikel tidak ditemukan</h2>";
        return;
    }

    // Load JS artikel dinamis
    const script = document.createElement("script");
    script.src = `articles/${id}.js`;
    script.onload = () => renderArticle();
    script.onerror = () => {
        document.getElementById("article-container").innerHTML =
            "<h2 class='text-center mt-20 text-xl'>Artikel tidak ditemukan</h2>";
    };
    document.body.appendChild(script);

    function renderArticle(){
        if(!ARTICLE){
            document.getElementById("article-container").innerHTML =
                "<h2 class='text-center mt-20 text-xl'>Artikel tidak ditemukan</h2>";
            return;
        }

        document.getElementById("title").innerText = ARTICLE.title;

        // Tags
        const tagsEl = document.getElementById("tags");
        tagsEl.innerHTML = "";
        if(ARTICLE.tags && ARTICLE.tags.length>0){
            ARTICLE.tags.forEach(tag=>{
                const span = document.createElement("span");
                span.className = "px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-sm dark:bg-indigo-900 dark:text-indigo-200";
                span.textContent = `#${tag}`;
                tagsEl.appendChild(span);
            });
        }

        // Thumbnail
        document.getElementById("thumb").src = ARTICLE.thumbnail;

        // Content
        document.getElementById("content").innerHTML = ARTICLE.content;

        // Sub Bab
        const subContainer = document.getElementById("sub");
        subContainer.innerHTML = "";
        if(ARTICLE.sub && ARTICLE.sub.length>0){
            ARTICLE.sub.forEach(s=>{
                const div = document.createElement("div");
                div.className = "sub-section p-4 border-l-4 border-indigo-500 bg-indigo-50 dark:bg-gray-800 rounded-md";
                div.innerHTML = `<h3 class="font-semibold mb-2">${s.subtitle}</h3>${s.body}`;
                subContainer.appendChild(div);
            });
        }

        // File download
        const fileBox = document.getElementById("files");
        fileBox.innerHTML = "";
        if(ARTICLE.files && ARTICLE.files.length>0){
            ARTICLE.files.forEach(f=>{
                const a = document.createElement("a");
                a.href = f.url;
                a.download = f.name;
                a.className = "px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition";
                a.textContent = f.name;
                fileBox.appendChild(a);
            });
        }
    }
});
</script>

</body>
</html>
